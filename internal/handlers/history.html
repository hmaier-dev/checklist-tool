{{ define "history.html" }}
<div id="lastPages"></div>
<script>

var hist = localStorage.getItem('lastPages');
fetch(`/history-data`, {
  method: "POST",
  headers: { 'Content-Type': 'application/json' },
  body: hist
})
.then(response => { 
  return response.json();
})
.then(data => { 
  localStorage.setItem('lastPages', data)
})
.then(() => {
  // After the update generate the breadcrumb html
  htmx.ajax('POST', '/history-breadcrumb', { 
    target: '#lastPages',
    swap: 'innerHTML',
    values: { lastPages: hist }
    });
});

</script>
{{ end }}
